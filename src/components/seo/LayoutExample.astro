---
/**
 * Exemple d'int√©gration des Schemas SEO dans Layout.astro
 *
 * Copie ce code dans src/layouts/Layout.astro pour activer
 * automatiquement les schemas SEO avanc√©s pour les clients Pro/Premium
 */

import LocalBusinessSchema from './LocalBusinessSchema.astro'
import OrganizationSchema from './OrganizationSchema.astro'
import { clientData, getClientFeatures } from '../../config/client'

interface Props {
	title: string
	description?: string
	classes?: string
}

const { title, description, classes } = Astro.props
const features = getClientFeatures()

// Les schemas SEO avanc√©s sont activ√©s uniquement pour Pro & Premium
const hasAdvancedSEO = features.advancedSEO && clientData.seo?.advanced

// Collecte tous les liens de r√©seaux sociaux disponibles
const socialMediaLinks = clientData.socialMedia
	? Object.values(clientData.socialMedia).filter(Boolean) as string[]
	: []
---

<!doctype html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />

		<title>{title}</title>
		{description && <meta name="description" content={description} />}

		<!-- SEO Avanc√© : Schemas JSON-LD (Pro & Premium uniquement) -->
		{hasAdvancedSEO && (
			<>
				<!-- LocalBusiness Schema : R√©f√©rencement local + Rich Snippets -->
				<LocalBusinessSchema
					businessName={clientData.business.name}
					businessType={clientData.seo.advanced!.businessType || 'LocalBusiness'}
					description={clientData.business.description}
					telephone={clientData.contact.phone.main}
					email={clientData.contact.email.main}
					priceRange={clientData.seo.advanced!.priceRange}
					address={{
						streetAddress: clientData.contact.address.street,
						addressLocality: clientData.contact.address.city,
						postalCode: clientData.contact.address.postalCode,
						addressCountry: 'FR'
					}}
					geo={{
						latitude: clientData.location.coordinates.lat,
						longitude: clientData.location.coordinates.lng
					}}
					openingHours={clientData.contact.hours.schedule}
					serviceArea={clientData.location.serviceAreas.cities}
					aggregateRating={{
						ratingValue: clientData.reviews.rating,
						reviewCount: clientData.reviews.count
					}}
					url={Astro.url.origin}
					sameAs={socialMediaLinks}
				/>

				<!-- Organization Schema : Identit√© de marque -->
				<OrganizationSchema
					name={clientData.business.name}
					url={Astro.url.origin}
					logo={clientData.seo.advanced!.logo}
					description={clientData.business.description}
					email={clientData.contact.email.main}
					telephone={clientData.contact.phone.main}
					address={{
						streetAddress: clientData.contact.address.street,
						addressLocality: clientData.contact.address.city,
						postalCode: clientData.contact.address.postalCode,
						addressCountry: 'FR'
					}}
					sameAs={socialMediaLinks}
					foundingDate={clientData.seo.advanced!.foundingDate}
					founder={clientData.seo.advanced!.founder}
				/>
			</>
		)}
	</head>
	<body class={classes}>
		<slot />
	</body>
</html>

<!--
üí° Comment √ßa marche :

1. Vitrine (490‚Ç¨) :
   - hasAdvancedSEO = false
   - Pas de schemas g√©n√©r√©s
   - Meta tags de base uniquement

2. Pro (690‚Ç¨) & Premium :
   - hasAdvancedSEO = true (si seoAdvanced existe dans client.ts)
   - LocalBusinessSchema + OrganizationSchema g√©n√©r√©s automatiquement
   - Donn√©es extraites de clientData

3. Test :
   - npm run dev
   - Afficher le code source
   - Chercher <script type="application/ld+json">
   - Tester sur https://search.google.com/test/rich-results

4. R√©sultat dans Google :
   ‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ 4.8 (52 avis) ‚Ä¢ ‚Ç¨‚Ç¨ ‚Ä¢ Ouvert
   üìç Adresse ‚Ä¢ üìû T√©l√©phone
-->
